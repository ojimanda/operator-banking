<!DOCTYPE html>
<html lang="en">
<head>
<style>

		h3{
		height:50px;
		top:0;
		width: 998px;
		font-family: monospace;
		text-align: center;
		position: fixed;
		margin-left: -499px;
		left: 50%;
		
	}
</style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <title>Tiket Pesawat</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.2.1/dist/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
</head>
<body>

<nav class="navbar fixed-top navbar-light bg-light">
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarToggler" aria-controls="navbarTogglerDemo01" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="container-fluid">
  <h3>Tiket Pesawat</h3>
</div>
  <div class="collapse navbar-collapse" id="navbarToggler">
    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
      <li class="nav-item">
        <a class="nav-link" href="/operator">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/operator/transfer">Transfer</a>
      </li>
      <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-expanded="false">
            Product
          </a>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
            <li><a class="dropdown-item " href="/operator/paketdata">Paket Data  </a></li>
            <li><a class="dropdown-item active" href="/operator/tiketpesawat">Tiket Pesawat <span class="sr-only">(current)</span></a></li>
            <li><a class="dropdown-item" href="/operator/bayartagihan">Bayar Tagihan</a></li>
          </ul>
        </li>
       <li class="nav-item">
        <a class="nav-link" href="#">Commerce</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="javascript: document.logoutForm.submit()">Log Out</a>
        <form name="logoutForm" th:action="@{/logout}" method="post" th:hidden="true">
        	<input hidden type="submit" value="Sign Out"/>
        </form>
      </li>
    </ul>
  </div>
</nav>

<div class="modal fade" id="invoiceTiket" tabindex="-1" role="dialog" aria-labelledby="invoiceTiketLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="invoiceTiketTitle">Invoice Pembelian Tiket Pesawat</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" >
        <div class="container fluid" >
         <div class="row">
         <div class="col-md-10 mx-auto">
         <form>
			<div class="form-group row" >
			<div class="col-sm-6">
					<label class="control-label" style="padding-top: 50px;">Tiket Destinasi : </label>
				</div>
				<div class="col-sm-6">
					<label class="control-label" id="tiketDestinasi" style="padding-top: 50px;"></label>
				</div>
				</div>
				<div class="form-group row">
				<div class="col-sm-6">
					<label class="control-label">Tanggal Keberangkatan : </label>
				</div>
				<div class="col-sm-6">
					<label class="control-label" id="tglBerangkat"  ></label>
				</div>
				</div>
				<div class="form-group row" >
			<div class="col-sm-6">
					<label class="control-label" >Jumlah Tiket : </label>
				</div>
				<div class="col-sm-6">
					<label class="control-label" id="totalTiket" ></label>
				</div>
				</div>
				<div class="form-group row" >
			<div class="col-sm-6">
					<label class="control-label" >Harga : </label>
				</div>
				<div class="col-sm-6">
					<label class="control-label" id="hargaTiketModal" ></label>
				</div>
				</div>
				<div class="form-group row">
				<div class="col-sm-6">
					<label class="control-label">No Rekening : </label>
				</div>
				<div class="col-sm-6">
					<label class="control-label" id="noRekPembeli"  ></label>
				</div>
				</div>
				<div class="form-group row">
				<div class="col-sm-6">
					<label class="control-label">Email : </label>
				</div>
				<div class="col-sm-6">
					<label class="control-label" id="emailPembeli"  ></label>
				</div>
				</div>
			</form>
				</div>
				</div>
			</div>
      </div>
      <div class="modal-footer">
      	<button type="button" class="btn btn-cancel" data-dismiss="modal">Cancel</button>
        <button type="button" class="btn btn-primary" id="save">Submit</button>
      </div>
    </div>
  </div>
</div>
	
	<!-- form pembelian -->
	<form method="post" th:action="@{/operator/tiketpesawat}" th:object="${tiket}">
	<div class="container">
	<div class="row d-flex justify-content-center my-5 py-4">
	<div class="col-10">
	<div class="form-group">
	<div class="alert alert-primary" role="alert" th:text="${success}" th:if="${success}"></div>
	<div class="alert alert-danger" role="alert" th:text="${fail}" th:if="${fail}"></div>
      <label for="inputState">Destinasi</label>
      <select id="tiketOption" class="form-control" th:field="*{name}">
      <option value="0">Pilih Tiket Pesawat </option>
      <th:block th:each="tiket : ${tikets}"> 
        <option
        th:text="${tiket.name}"
        th:value="${tiket.name}"></option>
        </th:block>
      </select>
    </div>
    <div class="form-group">
      <label>Tanggal Keberangkatan</label></br>
	  <input class="form-control" type="date" id="tglTiket" th:field="*{tglBerangkat}">
      </div>
      <div class="form-group">
      <label for="inputState" >Jumlah Tiket</label>
      <input type="number"class="form-control" id="jumlahTiket" th:field="*{jumlahTiket}" min=1>
    </div>
    <div class="form-group">
      <label for="inputState" >Harga</label>
      <input type="text"class="form-control" id="hargaTiket"  th:field="*{harga}" readonly>
    </div>
    <div class="form-group">
    	<label for="inputState">No Rekening</label>
    	<input type="text" class="form-control" id="noRek" th:field="*{noRek}">
    </div>
    <div class="form-group">
    	<label for="inputState">Email</label>
    	<input type="text" class="form-control" id="email" th:field="*{email}">
    </div>
	<input type="submit" class="btn btn-outline-success"  id="submit" value="Pesan"/>
	</div>
	</div>
	</div>
	</form>
	 <!-- footer -->
	 <footer class="text-center fixed-bottom">
		  <!-- Grid container -->
		  <div class="container"></div>
		  <!-- Grid container -->
		
		  <!-- Copyright -->
		  <div class="text-center p-3 bg-light">
		    Â© 2023 Copyright: Kelompok 7
		  </div>
		  <!-- Copyright -->
	  </footer>

</body>
<script type="text/javascript">
	const dest = document.getElementById("tiketOption");
	const jumlah = document.getElementById("jumlahTiket");
	const list = '[[${detailTiket}]]'
	const datas = JSON.parse(list.replace(/&quot;/g,'"'));
	const harga = document.getElementById("hargaTiket");
	var total;
	dest.addEventListener('change', function (e) { 
		const getDest = e.target.value;
		for(data of datas){
			if(data["name"] == getDest){
				harga.value = data["price"]
				total = data["price"]
				jumlah.value = 1
			}
		}
	 })
	 
	 jumlah.addEventListener('change', function (e){
		 const getJumlah = e.target.value;
		 harga.value = total * getJumlah;
	 })
	 
	});
</script>
</html>